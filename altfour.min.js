!function(){var e=this,t="altfourjs",n=function(){var e=this;this.garbageCollectors={},this.cleanup=function(e){delete this.storage[e]},this.registerGc=function(e,t){var n=this;this.garbageCollectors[e]=setTimeout(function(){n.cleanup.apply(n,[e])},t)},this.deregisterGc=function(e){clearTimeout(this.garbageCollectors[e]),this.garbageCollectors[e]=null},this.hasLocalStorage=function(){var e,t,n;e=new Date;try{return(t=window.localStorage).setItem(e,e),n=t.getItem(e)==e,t.removeItem(e),n&&t}catch(r){return!1}},this.saveToLocalStorage=function(){this.hasLocalStorage()&&localStorage.setItem(t,JSON.stringify(this.storage))},this.retrieveFromLocalStorage=function(){this.hasLocalStorage()?this.storage=JSON.parse(localStorage.getItem(t)):this.storage=null},this.retrieveFromLocalStorage(),this.storage||(this.storage={})};n.prototype={add:function(e,t,n){return n?(n=(new Date).getTime()+n,this.registerGc(e,n)):(n=0,this.deregisterGc(e)),this.storage[e]={item:t,expiry:n},this.saveToLocalStorage(),this},get:function(e,t){var n,r;r=(new Date).getTime();if(this.storage[e]){n=this.storage[e];if(!n.expiry||n.expiry&&n.expiry>=r)return n.item;n.expiry&&n.expiry<r&&(this.storage[e]=null,this.saveToLocalStorage())}else if(t){var i;i=t(e,this);if(i!==undefined)return this.add(e,i,0),this.get(e)}return undefined},clear:function(){return this.storage={},this.saveToLocalStorage(),this}},e.Cache=e.Cache||n}();